<!DOCTYPE html>
<html lang="KR">
<head>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-NVC469B1QW"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-NVC469B1QW');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="블로그입니다.">
    <meta property="og:site_name" content="wirekang 블로그">
    <meta property="og:description" content="블로그입니다.">
    <meta property="og:type" content="article">
    <meta property="og:image" content="https://wirekang.github.io/logo.png">
    <meta property="og:local" content="ko_KR">
    
        <title>수제 블로그 개발</title>
        <meta property="og:title" content="수제 블로그 개발">
        <meta property="og:url" content="https://wirekang.github.io/first.html">
    

    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <style>

@import url(//fonts.googleapis.com/earlyaccess/nanumgothic.css);

@font-face {
    font-family: 'D2Coding';
    src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_three@1.0/D2Coding.woff') format('woff');
    font-weight: normal;
    font-style: normal;
}

html{
    font-size: 18px;
    font-family: 'Nanum Gothic', sans-serif;
    width:100%;
    height:100%;
    margin: 0;
    padding: 0;
    display:flex;
    justify-content: center;
}

body{
    width:100%;
    height:97%;
    max-width: 900px;
    padding: 10px;
    margin: auto 0;
    background-color: #fdfdfb;
}

#container{
    width:100%;
    height:100%;
    display:flex;
    flex-direction: column;
    justify-content: flex-start;
}

div.btitle{
    font-family: 'D2Coding';
    
    font-size: 20px;
    padding-top: 8px;
    
    text-align:center;
}

div.description{
    font-size: 16px;
    text-align:center;
    padding-top: 12px;
    padding-bottom: 16px;
}

div.tags{
    font-size: 16px;
    display:flex;
    flex-direction: row;
    flex-wrap: wrap;
}

div.tags a{
    border: 1px solid #aaa;
    padding: 2px;
}

p.filter{
    font-size: 20px;
    text-align: center;
}

a.post{
    border-top: 1px solid #ccc;
    display:block;
    padding: 2px;
    font-size: 17px;
}

a.post span.title{
    float:left;   
}

a.post span.date{
    float:right;
}

div.single{
    padding: 18px;
    word-break: keep-all;
    color: #333333;
}

div.single div.title{
    font-size: 26px;
    font-weight: bold;
    text-align:center;
    padding-bottom: 6px;
}

div.single div.tag{
    text-align: right;
}

div#toc {
    padding-bottom: 40px;
}

a.toc{
    font-size:18px;
    line-height: 25px;
}

a.toc-h1{
    margin-left: 0;
}

a.toc-h2{
    margin-left: 20px;
}

a.toc-h1::before{
    font-size: 10px;
    content: "■ "
}

a.toc-h2::before{
    font-size: 9px;
    content: "● "
}

div#post {
    line-height: 150%;
}

div#post h1{
    font-size: 1.8em;
}

div#post h2{
    font-size: 1.5em;
}

div#post h3{
    font-size: 1.2em;
}

div#post h1,
div#post h2 {
  padding-bottom: .3em;
  border-bottom: 1px solid #dadcdf;
}

code {
    font-family: 'D2Coding';
}

div.comment-block{
    border: 1px solid #ccc;
    display:flex;
    flex-direction:column;
}

div.comment-l1{
    margin: 0.2em;
}

div.comment-l2{
    margin: 0.2em;
    max-height: 8em;
    overflow-y:auto;
}

span.comment-name{
    font-weight: bold;
    float:left;
}

span.comment-time{
    font-size: 0.8em;
    float:right;
}

span.comment-text{
    font-size: 0.9em;
}

a.comment-delete{
    color:#666 !important;
    float:right;
}

div#comment-add{
    display:flex;
    flex-direction: column;
}

div#comment-add-l1{
    display:flex;
    flex-direction: row;
}

input#comment-name{
    max-width:15em;
    flex:3;
}
input#comment-pass{
    max-width:8em;
    flex:1;
    color:#999;
    font-style: italic;
}

div#comment-add-l2{
    display:flex;
    flex-direction: row;
}

textarea#comment-text{
    flex:20;
    resize: none;
    height:6em;
}

input#comment-submit{
    min-width:4em;
    flex:1;
}

div#alert{
    background-color: lightgoldenrodyellow;
    text-align: center;
    font-weight: bold;
    color:darkred;
}

a.nodeco{
    text-decoration: none;
    color:rgb(0, 0, 0);
}

a.nodeco:hover{
    color:#11a;
}

a.gray{
    color: #777;
}

.footer{
    margin-top: auto;
    padding-top:20px;
    padding-bottom: 5px;
    justify-self: flex-end;
    display:flex;
    flex-direction: row;
    justify-content: center;
    font-size: 10px;

}

</style>
</head>
<body>
<img src="https://wirekang.github.io/logo.png" alt="logo" style="visibility: hidden; width:0; height:0;"/>
<div id="container">
    <div class="btitle">
        <a class="nodeco" href="/">wirekang 블로그</a>
    </div>

    

    
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.1/styles/a11y-dark.min.css" integrity="sha512-1rzCaYWsg3l6uKvGbUT6rAZFOcVn0zeXAFlZudsnj8k2xcrU5asL8jfJUEijV9GPYMh0GnPToeCTJj6RXQnA8g==" crossorigin="anonymous" />
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.1/highlight.min.js"></script>
<script>
  const aid = "first";
  const addr="54.180.213.124";
  const slash='/';
  const httpRequest = new XMLHttpRequest();
  let commentDiv;
  let commentName,commentPass,commentText;
  let alertDiv;
  
  function initComment(){
    commentDiv=document.getElementById('comment-list');
    commentName=document.getElementById('comment-name')
    commentName.value=window.localStorage.getItem('name')
    commentPass=document.getElementById('comment-pass')
    commentPass.value=window.localStorage.getItem('pass')
    commentText=document.getElementById('comment-text')
    alertDiv = document.getElementById('alert')
    document.getElementById('comment-submit').addEventListener(
      'click',(e)=>{
        onSubmit();
      }
    )
    httpRequest.onreadystatechange = function (e){
      if(httpRequest.readyState === XMLHttpRequest.DONE){
        const msg = JSON.parse(httpRequest.responseText).msg;
        if(msg){
          alert(msg)
          selectComment();
          return;
        }
        if( httpRequest.status===200){
          let arr = JSON.parse(httpRequest.responseText);
          arr = arr.sort((a,b)=>{
            return a.id - b.id;
          })
          commentDiv.innerHTML="";
          arr.forEach(cmt=>{
            const date = new Date(cmt.time);
            const time=
            `${date.getFullYear()}-${date.getMonth()+1}-${date.getDate()} ${date.getHours()}:${date.getMinutes()}`;
            commentDiv.innerHTML+=
            `<div class='comment-block'>
            <div class='comment-l1'>
            <span class='comment-name'>${cmt.name}</span>
            <span class='comment-time'>${time}</span>
            </div> <div class='comment-l2'>
            <span class='comment-text'>${cmt.text}</span>
            <a class="nodeco comment-delete" onclick='onDelete(${cmt.id})'>삭제</a>
            </div></div>`;
          })
        }
      }
    }
  }

  function selectComment(){
    const url=`http:${slash}/${addr}/api/comments?aid=${aid}`
    httpRequest.open('GET',url);
    httpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
    httpRequest.send();
  }

  function insertComment(){
    const url=`http:${slash}/${addr}/api/comments`
    httpRequest.open('POST',url);
    httpRequest.setRequestHeader("Content-Type","application/json");
      const b = JSON.stringify({
      aid,
      name: commentName.value,
      passwd: commentPass.value,
      text:commentText.value,
    })
    console.log(b);
    httpRequest.send(b);
    window.localStorage['name']=commentName.value;
    window.localStorage['pass']=commentPass.value;
  }

  function deleteComment(id,pass){
    const url=`http:/${slash}/${addr}/api/comments?id=${id}&passwd=${pass}`
    httpRequest.open('DELETE',url);
    httpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
    httpRequest.send();
  }

  function onDelete(id){
    let pass=prompt("댓글 작성 시 사용했던 비밀번호를 입력하세요.",localStorage['pass']);
    deleteComment(id,pass);
  }

  function onSubmit(){
    insertComment();
    commentText.value='';
  }

  let timeouts = [];

  function alert(str){
    alertDiv.innerHTML=str;
    timeouts.forEach((v)=>{
      clearTimeout(v)
    })
    timeouts = []
    timeouts.push(setTimeout(()=>{
      alertDiv.innerHTML=''
    },3000))
  }

  function doTOC(){
    const post = document.getElementById("post")
    const toc=document.getElementById("toc")
    const headings = Array.from(post.getElementsByTagName("*")).filter( 
      e=> (e.tagName=="H1" || e.tagName=="H2")
    )
    
    let tocInner="<h1 class='toc'>목차</h1>"
    let index = 0
    headings.forEach(h => {
      h.id=index++
      tocInner+=`<a class="nodeco toc toc-${h.tagName.toLowerCase()}" href="#${h.id}">${h.innerHTML}</a></br>`
      h.innerHTML=`<a class="nodeco" href="#toc">${h.innerHTML}</a>`
    })
    console.log(headings)
    console.log(tocInner)
    toc.innerHTML = tocInner
  }

  hljs.initHighlightingOnLoad();
  document.addEventListener("DOMContentLoaded",()=>{
    doTOC();
    initComment();
    selectComment();
  })
</script>
<div class="single">
    <div class="title">
        <a class="nodeco" href="first.html">수제 블로그 개발</a>
    </div>
    <div class="tag">
        
            <a class="nodeco gray" href ="tag1.html">#블로그</a>
        
            <a class="nodeco gray" href ="tag2.html">#개발</a>
        
    </div>
    <div id="post">
        <div id="toc"></div>
        <h1>발단</h1>

<p>원래 블로그 라는 것에 큰 관심을 가지고 있던 것은 아니었습니다. 다만 가끔 씩 글을 쓰고 싶을 때 마다 티스토리나 네이버 블로그에 글을 쓰곤 했습니다. 근데 그런 상업 블로그 서비스들은 대부분 전문 블로거들을 위한 고급 기능들, 이를테면 온갖 관리 기능이나 복잡한 레이아웃, 많은 플러그인 들을 지원합니다. 저는 당연히 그런 기능들을 활용할 수 있는 능력도 없고, 필요도 없었습니다. 그런데도 그런 서비스를 이용하고 있었다는 점이 마음에 들지 않았습니다. 그러다 두 달 정도 전인 2020년 10월에 갑자기 블로그에 글을 자주 쓰고 싶다는 충동이 들었고, 딱 필요한 정도만 제공 해주는 블로그를 직접 만들자는 다짐을 하게 되었습니다.</p>

<h1>정적 블로그</h1>

<p>제일 먼저 든 생각은 github.io 에 정적 블로그를 운영하자는 생각이었습니다. 서버를 돌리고 싶지는 않았습니다. 어차피 트래픽이 적게 나올 것 이기 때문에 AWS free tier 같은 것도 잠시 고려해봤었으나, 이미 사용 중 이기도 했고 더 유용하게 활용할 수도 있을 기회를 날린다는 생각이 들었습니다. 많이 사용되는 정적 사이트 생성기 몇 개를 골라서 알아보다가, 귀찮은 나머지 그냥 직접 만들기로 결심했습니다.</p>

<h1>Golang</h1>

<p>당시 go 와 사랑에 빠져있던 상태였습니다. 무엇보다 Hugo 라는 정적 블로그 생성기가 go 의 템플릿 언어를 사용하는 것을 보았고, &ldquo;이 정도면 나도 금방 만들 수 있겠다&rdquo;라는 근거 없는 자신감이 들어서 go 언어를 사용하여 정적 블로그 생성기를 개발했습니다. 생각보다 쉽지 않았지만, 또 그렇게 복잡하지는 않은 덕분에 금방 만들 수 있었습니다.</p>

<h1>정리</h1>

<p>블로그 주소: <a href="https://wirekang.github.io">wirekang.github.io</a></p>

<p>블로그 소스 코드: <a href="https://github.com/wirekang/blog">github.com/wirekang/blog</a></p>

<p>정적 생성기 소스 코드: <a href="https://github.com/wirekang/blogen">github.com/wirekang/blogen</a></p>

    </div>
    <div id="comment">
      <p class="filter">댓글</p>
      <div id="comment-list"></div>
      <div id="comment-add">
        <div id="comment-add-l1">
          <input type='text' id='comment-name' placeholder='이름'/>
          <input type='text' id='comment-pass' placeholder="비밀번호"/>
        </div>
        <div id="comment-add-l2">
          <textarea id='comment-text'></textarea>
          <input type='button' id='comment-submit' value='등록'/>
        </div>
        <div id="commnet-add-l3">
          <div id="alert">
          </div>
        </div>
      </div>
    </div>
</div>
<div class="related">
    <p class="filter">관련된 글</p>
    
</div>

    <div class="footer">
        <a href="https://github.com/wirekang/blogen">Powered by blogen</a>
    </div>
</div>
</body>
</html>

